# 1411. Number of Ways to Paint N × 3 Grid
[Hard](https://leetcode.com/problems/number-of-ways-to-paint-n-3-grid/description/)

## Problem Description

You have a grid of size n x 3 and you want to paint each cell of the grid with exactly one of the three colors: Red, Yellow, or Green while making sure that no two adjacent cells have the same color (i.e., no two cells that share vertical or horizontal sides have the same color).

Given n the number of rows of the grid, return the number of ways you can paint this grid. As the answer may grow large, the answer must be computed modulo 109 + 7.

**Example 1**:

<img width="402" height="256" alt="截圖 2026-01-04 下午6 51 59" src="https://github.com/user-attachments/assets/8bda6bd3-165a-400f-8ba6-5d7828be48a5" />

```
Input: n = 1
Output: 12
Explanation: There are 12 possible way to paint the grid as shown.
```
**Example 2**:
```
Input: n = 5000
Output: 30228214
```

**Constraints**
```
n == grid.length
1 <= n <= 5000
```

## Solution

### _Related Topic_
  Dynamic Programming

### _C++ Code_
```cpp
class Solution {
public:
    int numOfWays(int n) {
        int mod = 1e9 + 7;
        //prev_diff : The number of possible color combinations on previous row, all colors are different.
        //pre_same : The number of possible color combinations on previous row, two colors are the same.
        //prev_diff : The number of possible color combinations on current row, all colors are different.
        //pre_same : The number of possible color combinations on current row, two colors are the same.
        long long prev_diff = 6, prev_same = 6;
        long long cur_diff = 6, cur_same = 6;

        for(int i = 1; i < n; ++i){
            cur_diff =  (prev_diff * 2 + prev_same * 2) % mod;
            cur_same =  (prev_diff * 2 + prev_same * 3) % mod;
            prev_diff = cur_diff;
            prev_same = cur_same;
        }
        return (cur_diff + cur_same) % mod;
    }
};
```

### _Complexity Anlysis_
- _Time Complexity_: O(n)
- _Space Complexity_：O(1)
