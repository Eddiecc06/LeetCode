# 2975. Maximum Square Area by Removing Fences From a Field
[Medium](https://leetcode.com/problems/maximum-square-area-by-removing-fences-from-a-field/description/)

## Problem Description

There is a large (m - 1) x (n - 1) rectangular field with corners at (1, 1) and (m, n) containing some horizontal and vertical fences given in arrays hFences and vFences respectively.

Horizontal fences are from the coordinates (hFences[i], 1) to (hFences[i], n) and vertical fences are from the coordinates (1, vFences[i]) to (m, vFences[i]).

Return the maximum area of a square field that can be formed by removing some fences (possibly none) or -1 if it is impossible to make a square field.

Since the answer may be large, return it modulo 109 + 7.

Note: The field is surrounded by two horizontal fences from the coordinates (1, 1) to (1, n) and (m, 1) to (m, n) and two vertical fences from the coordinates (1, 1) to (m, 1) and (1, n) to (m, n). These fences cannot be removed.


**Example 1**:

<img width="418" height="225" alt="截圖 2026-01-16 晚上11 28 09" src="https://github.com/user-attachments/assets/735d157c-412d-4be3-8a5c-2817bc22f7d0" />

```
Input: m = 4, n = 3, hFences = [2,3], vFences = [2]
Output: 4
Explanation: Removing the horizontal fence at 2 and the vertical fence at 2 will give a square field of area 4.
```
**Example 2**:

<img width="254" height="212" alt="截圖 2026-01-16 晚上11 28 15" src="https://github.com/user-attachments/assets/6f96c327-54bf-44e4-8efc-ec560a4e9be9" />

```
Input: m = 6, n = 7, hFences = [2], vFences = [4]
Output: -1
Explanation: It can be proved that there is no way to create a square field by removing fences.
```

**Constraints**
```
3 <= m, n <= 10^9
1 <= hFences.length, vFences.length <= 600
1 < hFences[i] < m
1 < vFences[i] < n
hFences and vFences are unique.
```

## Solution

### _Related Topic_
   Array, Hash Table, Enumeration

### _C++ Code_
```cpp
class Solution {
public:
    int maximizeSquareArea(int m, int n, vector<int>& hFences, vector<int>& vFences) {
        constexpr int mod = 1e9 + 7;
        long long length = 0;
        //Insert the boundary
        hFences.push_back(1);
        hFences.push_back(m);
        vFences.push_back(1);
        vFences.push_back(n);

        sort(hFences.begin(), hFences.end());
        sort(vFences.begin(), vFences.end());

        unordered_set<int> heights;
        //Find all possible height
        for(int i = 1; i < hFences.size(); ++i){
            for(int j = 0; j < i; ++j){
                heights.insert(hFences[i] - hFences[j]);
            }
        }
        //Find all possible  width
        for(int i = 1; i < vFences.size(); ++i){
            for(int j = 0; j < i; ++j){
                int cur_width = vFences[i] - vFences[j];
                //It's possible to form a square area
                if(heights.count(cur_width))
                    length = max(length, (long long) cur_width);
            }
        }
        if(length == 0)
            return -1;
        return (int)(length * length % mod);
 
    }
};
```

### _Complexity Anlysis_
- _Time Complexity_: O(h^2 + v^2)
- _Space Complexity_：O(h^2 + v^2)
