# 2536. Increment Submatrices by One
[Medium](https://leetcode.com/problems/increment-submatrices-by-one/description/)

## Problem Description

You are given a positive integer n, indicating that we initially have an n x n 0-indexed integer matrix mat filled with zeroes.

You are also given a 2D integer array query. For each query[i] = [row1i, col1i, row2i, col2i], you should do the following operation:

- Add 1 to every element in the submatrix with the top left corner (row1i, col1i) and the bottom right corner (row2i, col2i). That is, add 1 to mat[x][y] for all row1i <= x <= row2i and col1i <= y <= col2i.

Return the matrix mat after performing every query.


**Example 1**:

<img width="461" height="123" alt="截圖 2025-11-14 晚上9 27 04" src="https://github.com/user-attachments/assets/9f2c6f8c-7d2d-49d1-8d2e-ab01cfd9374c" />

```
Input: n = 3, queries = [[1,1,2,2],[0,0,1,1]]
Output: [[1,1,0],[1,2,1],[0,1,1]]
Explanation: The diagram above shows the initial matrix, the matrix after the first query, and the matrix after the second query.
- In the first query, we add 1 to every element in the submatrix with the top left corner (1, 1) and bottom right corner (2, 2).
- In the second query, we add 1 to every element in the submatrix with the top left corner (0, 0) and bottom right corner (1, 1).
```
**Example 2**:

<img width="286" height="93" alt="截圖 2025-11-14 晚上9 27 11" src="https://github.com/user-attachments/assets/423b5d8c-be70-4667-b649-abd554e2fd6f" />

```
Input: n = 2, queries = [[0,0,1,1]]
Output: [[1,1],[1,1]]
Explanation: The diagram above shows the initial matrix and the matrix after the first query.
- In the first query we add 1 to every element in the matrix.
```

**Constraints**
```
1 <= n <= 500
1 <= queries.length <= 10^4
0 <= row1i <= row2i < n
0 <= col1i <= col2i < n
```

## Solution

### _Related Topic_
   Array, prefix sum

### _C++ Code_
```cpp
class Solution {
public:
    vector<vector<int>> rangeAddQueries(int n, vector<vector<int>>& queries) {
        vector<vector<int>> prefix(n+1, vector<int>(n+1, 0));
        vector<vector<int>> ans(n, vector<int>(n, 0));
        for(auto &q : queries){
            int row1 = q[0], col1 = q[1], row2 = q[2], col2 = q[3];
            ++prefix[row1][col1];
            ++prefix[row2 + 1][col2 + 1];

            --prefix[row1][col2 + 1];
            --prefix[row2 + 1][col1];
        }
        for(int i = 0; i < n; ++i){
            for(int j = 0; j < n; ++j){
                int prev1, prev2, prev3;
                prev1 = (i == 0) ? 0 : ans[i-1][j];
                prev2 = (j == 0) ? 0 : ans[i][j-1];
                prev3 = (i == 0 || j == 0) ? 0 : ans[i-1][j-1];
                
                ans[i][j] = prefix[i][j] + prev1 + prev2 - prev3;
            }
        }
        return ans;
    }
};
```

### _Complexity Anlysis_
- _Time Complexity_: O(n*n)
- _Space Complexity_：O(n*n)
